<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>尺寸重量换算工具</title>
    <!-- 引入Element UI的CSS样式 -->
    <link href="css/element-ui.css" rel="stylesheet">
    <style>
        /* 隐藏input type=number上下箭头 */
        input::-webkit-inner-spin-button,
        input::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* 组件字体加大 */
        .el-button,
        .el-input,
        .el-form-item__label,
        .el-select,
        label {
            font-size: 20px; /* 这里的字体大小可以根据需求调整 */
        }

        /*.el-form-item__label {*/
        /*    white-space: nowrap;*/
        /*}*/
        /* 最小宽度 */
        .min-width-col {
            min-width: 140px;
        }

        .label-tip {
            /*font-size: 14px;*/
            /*color: rgba(0, 0, 0, 0.63);*/
        }

        .label-title {
            font-weight: bold;
        }

        /* 如果需要，可以调整el-select的外边距来进一步调整位置 */
        .el-select {
            margin-right: -5px; /* 根据实际情况调整这个值 */
        }
    </style>
</head>
<body>
<div id="app">
    <br/>
    <el-form label-width="120px" ref="form" v-model="size">
        <el-row :gutter="20">
            <el-col :span="sizeAndWeightSpanNum">
                <label class="label-title">长：</label>
                <el-form-item label="毫米">
                    <el-input @input="handleSizeInput($event, 'mm', size.length)" class="min-width-col" type="number"
                              v-model="size.length.mm">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">mm</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="厘米">
                    <el-input @input="handleSizeInput($event, 'cm', size.length)" class="min-width-col" type="number"
                              v-model="size.length.cm">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">cm</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="英寸">
                    <el-input @input="handleSizeInput($event, 'in', size.length)" class="min-width-col" type="number"
                              v-model="size.length.in">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">in</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="英尺">
                    <el-input @input="handleSizeInput($event, 'ft', size.length)" class="min-width-col" type="number"
                              v-model="size.length.ft">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">ft</i>
                    </el-input>
                </el-form-item>
                <el-form-item>
                    <el-popover
                            placement="right"
                            trigger="click"
                            width="320">
                        <label class="label-tip">长宽高重量体积文本框宽度：</label>
                        <input style="width: 20px;height:20px;border-radius: 4px" type="number"
                               v-model="sizeAndWeightSpanNum"></input><br/>
                        <label class="label-tip">售价计算毛利润文本框宽度：</label>
                        <input style="width: 20px;height:20px;border-radius: 4px" type="number"
                               v-model="costProfitSpanNum"></input><br/>
                        <label class="label-tip">有效小数位设置：</label>
                        <el-checkbox @change="handleFixedData" v-model="showFixedTextInput">
                            {{ showFixedTextInput ? '开启' : '关闭' }}
                        </el-checkbox>
                        <el-tooltip class="item" effect="dark" content="小数点后无效的0不补" placement="top-start">
                            <input @input="handleDataToFixed" style="width: 20px;height:20px;border-radius: 4px"
                                   type="number"
                                   v-model="toFixedNum" v-show="showFixedTextInput"></input>
                        </el-tooltip>
                        <label class="label-tip" v-show="showFixedTextInput">位</label>
                        <el-button slot="reference">界面设置</el-button>
                    </el-popover>
                </el-form-item>
            </el-col>
            <el-col :span="sizeAndWeightSpanNum">
                <label class="label-title">宽：</label>
                <el-form-item label="毫米">
                    <el-input @input="handleSizeInput($event, 'mm', size.width)" class="min-width-col" type="number"
                              v-model="size.width.mm">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">mm</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="厘米">
                    <el-input @input="handleSizeInput($event, 'cm', size.width)" class="min-width-col" type="number"
                              v-model="size.width.cm">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">cm</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="英寸">
                    <el-input @input="handleSizeInput($event, 'in', size.width)" class="min-width-col" type="number"
                              v-model="size.width.in">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">in</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="英尺">
                    <el-input @input="handleSizeInput($event, 'ft', size.width)" class="min-width-col" type="number"
                              v-model="size.width.ft">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">ft</i>
                    </el-input>
                </el-form-item>
            </el-col>
            <el-col :span="sizeAndWeightSpanNum">
                <label class="label-title">高：</label>
                <el-form-item label="毫米">
                    <el-input @input="handleSizeInput($event, 'mm', size.height)" class="min-width-col" type="number"
                              v-model="size.height.mm">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">mm</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="厘米">
                    <el-input @input="handleSizeInput($event, 'cm', size.height)" class="min-width-col" type="number"
                              v-model="size.height.cm">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">cm</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="英寸">
                    <el-input @input="handleSizeInput($event, 'in', size.height)" class="min-width-col" type="number"
                              v-model="size.height.in">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">in</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="英尺">
                    <el-input @input="handleSizeInput($event, 'ft', size.height)" class="min-width-col" type="number"
                              v-model="size.height.ft">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">ft</i>
                    </el-input>
                </el-form-item>
            </el-col>
            <el-col :span="sizeAndWeightSpanNum">
                <label class="label-title">重量：</label>
                <el-form-item label="克">
                    <el-input @input="handleWeightInput($event, 'g')" class="min-width-col" type="number"
                              v-model="weight.g">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">g</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="千克">
                    <el-input @input="handleWeightInput($event, 'kg')" class="min-width-col" type="number"
                              v-model="weight.kg">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">kg</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="磅">
                    <el-input @input="handleWeightInput($event, 'lb')" class="min-width-col" type="number"
                              v-model="weight.lb">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">lb</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="盎司">
                    <el-input @input="handleWeightInput($event, 'oz')" class="min-width-col" type="number"
                              v-model="weight.oz">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">oz</i>
                    </el-input>
                </el-form-item>
            </el-col>
            <el-col :span="sizeAndWeightSpanNum">
                <label class="label-title">FBA费用计算：</label>
                <el-popover
                        placement="bottom"
                        trigger="hover">
                    <img src="img/standard.png">
                    <img src="img/low.png">
                    <a href="javascript:;" slot="reference">费用标准</a>
                </el-popover>
                <el-popover
                        placement="bottom"
                        trigger="hover">
                    <label style="font-size: 12px;color: red">外箱最长边不超过25英寸/63.5厘米，美国站单箱不能大于50磅/22.5公斤</label><br/>
                    <img src="img/fba外箱要求.png">
                    <a href="javascript:;" slot="reference">外箱要求</a>
                </el-popover>
                <el-form-item label="标准尺寸">
                    <el-input class="min-width-col" v-model="classification"></el-input>
                </el-form-item>
                <el-form-item class="min-width-col" label="标准配送费">
                    <el-input v-model="FBADeliveryFee.standard">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$USD</i>
                    </el-input>
                </el-form-item>
                <el-form-item class="min-width-col" label="低价配送费">
                    <el-input v-model="FBADeliveryFee.lowPrice">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$USD</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="高一档尺寸">
                    <el-input class="min-width-col" v-model="highClassification"></el-input>
                </el-form-item>
                <el-form-item class="min-width-col" label="高一档标准">
                    <el-input v-model="FBADeliveryFee.highStandard">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$USD</i>
                    </el-input>
                </el-form-item>
                <el-form-item class="min-width-col" label="高一档低价">
                    <el-input v-model="FBADeliveryFee.highLowPrice">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$USD</i>
                    </el-input>
                </el-form-item>
            </el-col>
            <el-col :span="sizeAndWeightSpanNum">
                <label class="label-title">体积：</label>
                <el-form-item label="立方厘米">
                    <el-input @input="handleVolumeInput($event, 'cm')" class="min-width-col" type="number"
                              v-model="volume.cm">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">cm&sup3;</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="立方英尺">
                    <el-input @input="handleVolumeInput($event, 'ft')" class="min-width-col" type="number"
                              v-model="volume.ft">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">ft&sup3;</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="立方英寸">
                    <el-input @input="handleVolumeInput($event, 'in')" class="min-width-col" type="number"
                              v-model="volume.in">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">in&sup3;</i>
                    </el-input>
                </el-form-item>
            </el-col>
        </el-row>
        <el-row :gutter="20">
            <el-col :span="5">
                <label class="label-title">常用汇率：</label>
                <el-form-item label="人民币">
                    <el-input @input="handleRatesInput($event, 'CNY')" type="number" v-model="rates.CNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="美元">
                    <el-input @input="handleRatesInput($event, 'USD')" type="number" v-model="rates.USD">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$USD</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="加拿大元">
                    <el-input @input="handleRatesInput($event, 'CAD')" type="number" v-model="rates.CAD">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$CAD</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="欧元">
                    <el-input @input="handleRatesInput($event, 'EUR')" type="number" v-model="rates.EUR">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$EUR</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="英镑">
                    <el-input @input="handleRatesInput($event, 'GBP')" type="number" v-model="rates.GBP">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$GBP</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="日元">
                    <el-input @input="handleRatesInput($event, 'JPY')" type="number" v-model="rates.JPY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$JPY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="澳元">
                    <el-input @input="handleRatesInput($event, 'AUD')" type="number" v-model="rates.AUD">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$AUD</i>
                    </el-input>
                </el-form-item>
            </el-col>
            <el-col :span="5">
                <label class="label-title">不常用汇率：</label>
                <el-form-item label="新加坡元">
                    <el-input @input="handleRatesInput($event, 'SGD')" type="number" v-model="rates.SGD">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$SGD</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="墨西哥比索">
                    <el-input @input="handleRatesInput($event, 'MXN')" type="number" v-model="rates.MXN">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$MXN</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="瑞典朗克">
                    <el-input @input="handleRatesInput($event, 'SEK')" type="number" v-model="rates.SEK">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$SEK</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="波兰兹罗提">
                    <el-input @input="handleRatesInput($event, 'PLN')" type="number" v-model="rates.PLN">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$PLN</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="土耳其里拉">
                    <el-input @input="handleRatesInput($event, 'TRY')" type="number" v-model="rates.TRY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$TRY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="沙特里亚尔">
                    <el-input @input="handleRatesInput($event, 'SAR')" type="number" v-model="rates.SAR">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$SAR</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="阿联酋迪拉姆">
                    <el-input @input="handleRatesInput($event, 'AED')" type="number" v-model="rates.AED">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$AED</i>
                    </el-input>
                </el-form-item>
            </el-col>
            <el-col :span="costProfitSpanNum">
                <label class="label-title">售价计算毛利润：</label>
                <el-form-item label="售价">
                    <el-input @input="profitCalculationHandle('price')" style="width: 200px;display: inline-block"
                              type="number"
                              v-model="profitCalculation.price">
                        <!--                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">$USD</i>-->
                        <el-select @change="profitCalculationHandle('currency')" slot='suffix' style="width: 100px"
                                   v-model="profitCalculation.currency">
                            <el-option
                                    :key="item.value"
                                    :label="item.label"
                                    :value="item.value"
                                    v-for="item in profitCalculation.currencyOptions">
                            </el-option>
                        </el-select>
                    </el-input>
                    <el-input @input="profitCalculationHandle('priceCNY')" style="width: 200px;display: inline-block"
                              type="number" v-model="profitCalculation.priceCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="佣金&税">
                    <el-tooltip content="与售价的百分比" effect="light" placement="top">
                        <el-input @input="profitCalculationHandle('commissionRate')"
                                  style="width: 80px;display: inline-block"
                                  type="number"
                                  v-model="profitCalculation.commissionRate">
                            <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">%</i>
                        </el-input>
                    </el-tooltip>
                    <el-input @input="profitCalculationHandle('commission')" disabled
                              style="width: 160px;display: inline-block" type="number"
                              v-model="profitCalculation.commission">
                        <i slot='suffix'
                           style="font-style: normal; margin-right: 10px; line-height: 36px">${{profitCalculation.currency}}</i>
                    </el-input>
                    <el-input @input="profitCalculationHandle('commissionCNY')" disabled
                              style="width: 160px;display: inline-block" type="number"
                              v-model="profitCalculation.commissionCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="广告费">
                    <el-tooltip content="与售价的百分比" effect="light" placement="top">
                        <el-input @input="profitCalculationHandle('adRate')" style="width: 80px;display: inline-block"
                                  type="number"
                                  v-model="profitCalculation.adRate">
                            <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">%</i>
                        </el-input>
                    </el-tooltip>
                    <el-input @input="profitCalculationHandle('adCost')" style="width: 160px;display: inline-block"
                              type="number" v-model="profitCalculation.adCost">
                        <i slot='suffix'
                           style="font-style: normal; margin-right: 10px; line-height: 36px">${{profitCalculation.currency}}</i>
                    </el-input>
                    <el-input @input="profitCalculationHandle('adCostCNY')" style="width: 160px;display: inline-block"
                              type="number" v-model="profitCalculation.adCostCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="配送费">
                    <el-input @input="profitCalculationHandle('deliverFee')" style="width: 200px;display: inline-block"
                              type="number" v-model="profitCalculation.deliverFee">
                        <i slot='suffix'
                           style="font-style: normal; margin-right: 10px; line-height: 36px">${{profitCalculation.currency}}</i>
                    </el-input>
                    <el-input @input="profitCalculationHandle('deliverFeeCNY')"
                              style="width: 200px;display: inline-block"
                              type="number"
                              v-model="profitCalculation.deliverFeeCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="采购成本">
                    <el-input @input="profitCalculationHandle('purchasingCost')"
                              style="width: 200px;display: inline-block"
                              type="number"
                              v-model="profitCalculation.purchasingCost">
                        <i slot='suffix'
                           style="font-style: normal; margin-right: 10px; line-height: 36px">${{profitCalculation.currency}}</i>
                    </el-input>
                    <el-input @input="profitCalculationHandle('purchasingCostCNY')"
                              style="width: 200px;display: inline-block"
                              type="number"
                              v-model="profitCalculation.purchasingCostCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="毛利润">
                    <el-input style="width: 200px;display: inline-block" type="number"
                              v-model="profitCalculation.grossProfit">
                        <i slot='suffix'
                           style="font-style: normal; margin-right: 10px; line-height: 36px">${{profitCalculation.currency}}</i>
                    </el-input>
                    <el-input style="width: 200px;display: inline-block" type="number"
                              v-model="profitCalculation.grossProfitCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
            </el-col>
            <el-col :span="costProfitSpanNum">
                <label class="label-title">成本计算售价：</label>
                <el-form-item label="采购成本">
                    <el-input @input="priceCalculationHandle('purchasingCost')" ref="inputRef"
                              style="width: 200px;display: inline-block"
                              type="number"
                              v-model="priceCalculation.purchasingCost">
                        <template slot="suffix">
                            <el-select @change="priceCalculationHandle('currency')" slot='suffix' style="width: 100px;"
                                       v-model="priceCalculation.currency">
                                <el-option
                                        :key="item.value"
                                        :label="item.label"
                                        :value="item.value"
                                        v-for="item in priceCalculation.currencyOptions">
                                </el-option>
                            </el-select>
                        </template>
                    </el-input>
                    <el-input @input="priceCalculationHandle('purchasingCostCNY')"
                              style="width: 200px;display: inline-block"
                              type="number"
                              v-model="priceCalculation.purchasingCostCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="配送费">
                    <el-input @input="priceCalculationHandle('deliverFee')" style="width: 200px;display: inline-block"
                              type="number" v-model="priceCalculation.deliverFee">
                        <i slot='suffix'
                           style="font-style: normal; margin-right: 10px; line-height: 36px">${{priceCalculation.currency}}</i>
                    </el-input>
                    <el-input @input="priceCalculationHandle('deliverFeeCNY')"
                              style="width: 200px;display: inline-block"
                              type="number"
                              v-model="priceCalculation.deliverFeeCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="毛利润">
                    <el-tooltip content="与采购成本的百分比" effect="light" placement="top">
                        <el-input @input="priceCalculationHandle('grossProfitRate')"
                                  style="width: 80px;display: inline-block"
                                  type="number"
                                  v-model="priceCalculation.grossProfitRate">
                            <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">%</i>
                        </el-input>
                    </el-tooltip>
                    <el-input @input="priceCalculationHandle('grossProfit')" style="width: 160px;display: inline-block"
                              type="number" v-model="priceCalculation.grossProfit">
                        <i slot='suffix'
                           style="font-style: normal; margin-right: 10px; line-height: 36px">${{priceCalculation.currency}}</i>
                    </el-input>
                    <el-input @input="priceCalculationHandle('grossProfitCNY')"
                              style="width: 160px;display: inline-block"
                              type="number"
                              v-model="priceCalculation.grossProfitCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="佣金&税">
                    <el-tooltip content="与售价的百分比" effect="light" placement="top">
                        <el-input @input="priceCalculationHandle('commissionRate')"
                                  style="width: 80px;display: inline-block"
                                  type="number"
                                  v-model="priceCalculation.commissionRate">
                            <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">%</i>
                        </el-input>
                    </el-tooltip>
                    <el-input @input="priceCalculationHandle('commission')" disabled
                              style="width: 160px;display: inline-block" type="number"
                              v-model="priceCalculation.commission">
                        <i slot='suffix'
                           style="font-style: normal; margin-right: 10px; line-height: 36px">${{priceCalculation.currency}}</i>
                    </el-input>
                    <el-input @input="priceCalculationHandle('commissionCNY')" disabled
                              style="width: 160px;display: inline-block" type="number"
                              v-model="priceCalculation.commissionCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="广告费">
                    <el-tooltip content="与售价的百分比" effect="light" placement="top">
                        <el-input @input="priceCalculationHandle('adRate')" style="width: 80px;display: inline-block"
                                  type="number"
                                  v-model="priceCalculation.adRate">
                            <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">%</i>
                        </el-input>
                    </el-tooltip>
                    <el-input @input="priceCalculationHandle('adCost')" style="width: 160px;display: inline-block"
                              type="number"
                              v-model="priceCalculation.adCost">
                        <i slot='suffix'
                           style="font-style: normal; margin-right: 10px; line-height: 36px">${{priceCalculation.currency}}</i>
                    </el-input>
                    <el-input @input="priceCalculationHandle('adCostCNY')" style="width: 160px;display: inline-block"
                              type="number" v-model="priceCalculation.adCostCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
                <el-form-item label="售价">
                    <el-input style="width: 200px;display: inline-block" type="number" v-model="priceCalculation.price">
                        <i slot='suffix'
                           style="font-style: normal; margin-right: 10px; line-height: 36px">${{priceCalculation.currency}}</i>
                    </el-input>
                    <el-input style="width: 200px;display: inline-block" type="number"
                              v-model="priceCalculation.priceCNY">
                        <i slot='suffix' style="font-style: normal; margin-right: 10px; line-height: 36px">￥CNY</i>
                    </el-input>
                </el-form-item>
            </el-col>
        </el-row>
        <el-row :gutter="20">
            <el-col :span="6">
                <el-form-item label="">

                </el-form-item>
            </el-col>
        </el-row>
        <!-- 提交按钮等 -->
    </el-form>
</div>
<!-- 引入Vue.js -->
<script src="js/vue.min.2.6.14.js"></script>
<!-- 引入Element UI的JavaScript库 -->
<script src="js/element-ui.js"></script>
<script>
    // 创建一个Vue实例
    new Vue({
        el: '#app',
        data: {
            currencys: ['CNY', 'USD', 'CAD', 'MXN', 'BRL', 'GBP', 'EUR', 'SEK', 'PLN', 'TRY', 'JPY', 'SGD', 'AUD', 'AED', 'SAR'],
            sizeAndWeightSpanNum: 4,
            costProfitSpanNum: 7,
            showFixedTextInput: true,// 显示或隐藏精确小数位文本输入框
            toFixedNum: 6,
            weight: {
                g: 0.0,
                kg: 0.0,
                lb: 0.0,
                oz: 0.0
            },
            size: {
                length: {
                    mm: 0,
                    cm: 0.0,
                    in: 0.0,
                    ft: 0.0
                },
                width: {
                    mm: 0,
                    cm: 0.0,
                    in: 0.0,
                    ft: 0.0
                },
                height: {
                    mm: 0,
                    cm: 0.0,
                    in: 0.0,
                    ft: 0.0
                }
            },
            volume: {
                cm: 0.0,
                m: 0.0,
                in: 0.0,
                ft: 0.0
            },
            rates: {
                CNY: 0.0,
                USD: 0.0,
                CAD: 0.0,
                MXN: 0.0,
                BRL: 0.0,
                GBP: 0.0,
                EUR: 0.0,
                SEK: 0.0,
                PLN: 0.0,
                TRY: 0.0,
                JPY: 0.0,
                SGD: 0.0,
                AUD: 0.0,
                AED: 0.0,
                SAR: 0.0
            },
            weightUnits: {
                g: 1,
                kg: 1000,
                lb: 453.592,
                oz: 28.3495
            },
            sizeUnits: {
                mm: 0.1,
                cm: 1,
                in: 2.54,
                ft: 30.48
            },
            volumeUnits: {
                mm: 0.001,
                cm: 1,
                m: 1000000,
                in: 16.387037,
                ft: 28316.8
            },
            rateUnits: {},
            sizeType: {
                Small: {// 小号标准尺寸
                    name: '小号标准尺寸',
                    side: {//边长标准
                        longestSide: 15,// 最长边不超过15英寸
                        secondSide: 12,// 次长边不超过12英寸
                        shortestSide: 0.75// 最短边不超过0.75英寸
                    },
                    weight: {
                        from0To2: {
                            start: 0,
                            end: 2,// 不超过2盎司
                            unit: 'oz',
                            lowPriceDeliveryFee: 2.29,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 3.06// 售价超过10刀的标准商品FBA配送费
                        },
                        from2To4: {
                            start: 2,
                            end: 4,
                            unit: 'oz',
                            lowPriceDeliveryFee: 2.38,
                            standardDeliveryFee: 3.15
                        },
                        from4To6: {
                            start: 4,
                            end: 6,
                            unit: 'oz',
                            lowPriceDeliveryFee: 2.47,
                            standardDeliveryFee: 3.24
                        },
                        from6To8: {
                            start: 6,
                            end: 8,
                            unit: 'oz',
                            lowPriceDeliveryFee: 2.56,
                            standardDeliveryFee: 3.33
                        },
                        from8To10: {
                            start: 8,
                            end: 10,
                            unit: 'oz',
                            lowPriceDeliveryFee: 2.66,
                            standardDeliveryFee: 3.43
                        },
                        from10To12: {
                            start: 10,
                            end: 12,
                            unit: 'oz',
                            lowPriceDeliveryFee: 2.76,
                            standardDeliveryFee: 3.53
                        },
                        from12To14: {
                            start: 12,
                            end: 14,
                            unit: 'oz',
                            lowPriceDeliveryFee: 2.83,
                            standardDeliveryFee: 3.60
                        },
                        from14To16: {
                            start: 14,
                            end: 16,
                            unit: 'oz',
                            lowPriceDeliveryFee: 2.88,
                            standardDeliveryFee: 3.65
                        }
                    }
                },
                Large: {// 大号标准尺寸
                    name: '大号标准尺寸',
                    side: {//边长标准
                        longestSide: 18,
                        secondSide: 14,
                        shortestSide: 8
                    },
                    weight: {
                        from0To4: {
                            start: 0,
                            end: 4,// 不超过4盎司
                            unit: 'oz',
                            lowPriceDeliveryFee: 2.91,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 3.68// 售价超过10刀的标准商品FBA配送费
                        },
                        from4To8: {
                            start: 4,
                            end: 8,
                            unit: 'oz',
                            lowPriceDeliveryFee: 3.13,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 3.9// 售价超过10刀的标准商品FBA配送费
                        },
                        from8To12: {
                            start: 8,
                            end: 12,
                            unit: 'oz',
                            lowPriceDeliveryFee: 3.38,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 4.15// 售价超过10刀的标准商品FBA配送费
                        },
                        from12To16: {
                            start: 12,
                            end: 16,// 不超过16盎司
                            unit: 'oz',
                            lowPriceDeliveryFee: 3.78,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 4.55// 售价超过10刀的标准商品FBA配送费
                        },
                        from100To125: {
                            start: 1,
                            end: 1.25,// 不超过1.25磅
                            unit: 'lb',
                            lowPriceDeliveryFee: 4.22,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 4.99// 售价超过10刀的标准商品FBA配送费
                        },
                        from125To150: {
                            start: 1.25,
                            end: 1.5,
                            unit: 'lb',
                            lowPriceDeliveryFee: 4.6,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 5.37// 售价超过10刀的标准商品FBA配送费
                        },
                        from150To175: {
                            start: 1.5,
                            end: 1.75,
                            unit: 'lb',
                            lowPriceDeliveryFee: 4.75,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 5.52// 售价超过10刀的标准商品FBA配送费
                        },
                        from175To200: {
                            start: 1.75,
                            end: 2,
                            unit: 'lb',
                            lowPriceDeliveryFee: 5,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 5.77// 售价超过10刀的标准商品FBA配送费
                        },
                        from200To225: {
                            start: 2,
                            end: 2.25,
                            unit: 'lb',
                            lowPriceDeliveryFee: 5.1,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 5.87// 售价超过10刀的标准商品FBA配送费
                        },
                        from225To250: {
                            start: 2.25,
                            end: 2.5,
                            unit: 'lb',
                            lowPriceDeliveryFee: 5.28,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 6.05// 售价超过10刀的标准商品FBA配送费
                        },
                        from250To275: {
                            start: 2.5,
                            end: 2.75,
                            unit: 'lb',
                            lowPriceDeliveryFee: 5.44,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 6.21// 售价超过10刀的标准商品FBA配送费
                        },
                        from275To300: {
                            start: 2.75,
                            end: 3,
                            unit: 'lb',
                            lowPriceDeliveryFee: 5.85,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 6.62// 售价超过10刀的标准商品FBA配送费
                        },
                        from300To2000: {
                            start: 3,
                            end: 20,// 不超过20磅
                            unit: 'lb',
                            lowPriceDeliveryFee: 6.15,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 6.92,// 售价超过10刀的标准商品FBA配送费
                            excessWeight: {
                                unit: 'oz',
                                segmentation: 4, // 超出首重 3 磅的部分，每 4 盎司 $0.08
                                surcharge: 0.08// 超重部分附加费
                            }
                        }
                    }
                },
                LargeLarge: {// 大号大件
                    name: '大号大件',
                    side: {
                        longestSide: 59,
                        secondSide: 33,
                        shortestSide: 33
                        // 另外要求长度+围长不超过 130 英寸，此处不进行处理
                    },
                    weight: {
                        from0To50: {
                            start: 0,
                            end: 50,
                            unit: 'lb',
                            lowPriceDeliveryFee: 8.84,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 9.61,// 售价超过10刀的标准商品FBA配送费
                            excessWeight: {
                                unit: 'lb',
                                segmentation: 1, // 超出首磅的部分，每磅 $0.38
                                surcharge: 0.38// 超重部分附加费
                            }
                        }
                    }
                },
                Oversized: {// 超大件
                    name: '超大件',
                    side: {
                        longestSide: 59,
                        secondSide: 33,
                        shortestSide: 33
                        // 另外要求长度+围长不超过 130 英寸，此处不进行处理
                    },
                    weight: {
                        from0To50: {
                            start: 0,
                            end: 50,
                            unit: 'lb',
                            lowPriceDeliveryFee: 25.56,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 26.33,// 售价超过10刀的标准商品FBA配送费
                            excessWeight: {
                                unit: 'lb',
                                segmentation: 1, // 超出首磅的部分，每磅 $0.38
                                surcharge: 0.38// 超重部分附加费
                            }
                        },
                        from50To70: {
                            start: 50,
                            end: 70,
                            unit: 'lb',
                            lowPriceDeliveryFee: 39.35,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 40.12,// 售价超过10刀的标准商品FBA配送费
                            excessWeight: {
                                unit: 'lb',
                                segmentation: 1, // 超出首重的部分，每磅 $0.38
                                surcharge: 0.75// 超重部分附加费
                            }
                        },
                        from70To150: {
                            start: 70,
                            end: 150,
                            unit: 'lb',
                            lowPriceDeliveryFee: 54.04,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 54.81,// 售价超过10刀的标准商品FBA配送费
                            excessWeight: {
                                unit: 'lb',
                                segmentation: 1, // 超出首重的部分，每磅 $0.75
                                surcharge: 0.75// 超重部分附加费
                            }
                        },
                        from150To999: {
                            start: 150,
                            end: 999,
                            unit: 'lb',
                            lowPriceDeliveryFee: 194.18,// 售价不超过10刀的低价商品FBA配送费
                            standardDeliveryFee: 194.95,// 售价超过10刀的标准商品FBA配送费
                            excessWeight: {
                                unit: 'lb',
                                segmentation: 1, // 超出首重的部分，每磅 $0.38
                                surcharge: 0.19// 超重部分附加费
                            }
                        }
                    }
                },
            },
            classification: '',
            highClassification: '',
            lowPriceDeliveryFee: 0.0,// 售价不超过10刀的低价商品FBA配送费
            standardDeliveryFee: 0.0,// 标准配送费
            highStandardDeliveryFee: 0.0,// 标准配送费
            FBADeliveryFee: {// 标准配送费
                lowPrice: 0.0,// 售价不超过10刀的低价商品FBA配送费
                standard: 0.0,// 标准配送费
                highLowPrice: 0.0,// 高一档低价配送费
                highStandard: 0.0// 高一档标准配送费
            },
            profitCalculation: {
                price: 0,// 售价 指定币种
                priceCNY: 0,// 售价 人民币
                commissionRate: 15,// 佣金比例
                commission: 0,// 佣金 指定币种
                commissionCNY: 0,// 佣金 人民币
                deliverFee: 0,// 配送费 指定币种
                deliverFeeCNY: 0,// 配送费 人民币
                adRate: 30,// 广告费比例
                adCost: 0,// 广告费 指定币种
                adCostCNY: 0,// 广告费 人民币
                purchasingCost: 0,// 采购成本 指定币种
                purchasingCostCNY: 0,// 采购成本 人民币
                grossProfit: 0,// 毛利润 指定币种
                grossProfitCNY: 0,// 毛利润 人民币
                currency: 'CNY',//所选外币币种
                currencyRate: 1, // 币种汇率
                currencyOptions: [
                    {label: '美元(USD)', value: 'USD'},
                    {label: '加拿大元(CAD)', value: 'CAD'},
                    {label: '墨西哥比索(MXN)', value: 'MXN'},
                    {label: '巴西雷亚尔(BRL)', value: 'BRL'},
                    {label: '英镑(GBP)', value: 'GBP'},
                    {label: '欧元(EUR)', value: 'EUR'},
                    {label: '瑞典克朗(SEK)', value: 'SEK'},
                    {label: '波兰兹罗提(PLN)', value: 'PLN'},
                    {label: '土耳其里拉(TRY)', value: 'TRY'},
                    {label: '日元(JPY)', value: 'JPY'},
                    {label: '新加坡元(SGD)', value: 'SGD'},
                    {label: '澳元(AUD)', value: 'AUD'},
                    {label: '阿联酋迪拉姆(AED)', value: 'AED'},
                    {label: '沙特里亚尔(SAR)', value: 'SAR'}
                ]
            },
            priceCalculation: {
                price: 0,// 售价 指定币种
                priceCNY: 0,// 售价 人民币
                commissionRate: 15,// 佣金比例
                commission: 0,// 佣金 指定币种
                commissionCNY: 0,// 佣金 人民币
                deliverFee: 0,// 配送费 指定币种
                deliverFeeCNY: 0,// 配送费 人民币
                adRate: 30,// 广告费比例
                adCost: 0,// 广告费 指定币种
                adCostCNY: 0,// 广告费 人民币
                purchasingCost: 0,// 采购成本 指定币种
                purchasingCostCNY: 0,// 采购成本 人民币
                grossProfitRate: 300,// 毛利润率
                grossProfit: 0,// 毛利润 指定币种
                grossProfitCNY: 0,// 毛利润 人民币
                currency: 'CNY',//所选外币币种
                currencyRate: 1, // 币种汇率
                currencyOptions: [
                    {label: '美元(USD)', value: 'USD'},
                    {label: '加拿大元(CAD)', value: 'CAD'},
                    {label: '墨西哥比索(MXN)', value: 'MXN'},
                    {label: '巴西雷亚尔(BRL)', value: 'BRL'},
                    {label: '英镑(GBP)', value: 'GBP'},
                    {label: '欧元(EUR)', value: 'EUR'},
                    {label: '瑞典克朗(SEK)', value: 'SEK'},
                    {label: '波兰兹罗提(PLN)', value: 'PLN'},
                    {label: '土耳其里拉(TRY)', value: 'TRY'},
                    {label: '日元(JPY)', value: 'JPY'},
                    {label: '新加坡元(SGD)', value: 'SGD'},
                    {label: '澳元(AUD)', value: 'AUD'},
                    {label: '阿联酋迪拉姆(AED)', value: 'AED'},
                    {label: '沙特里亚尔(SAR)', value: 'SAR'}
                ]
            }
        },
        mounted() {
            // 获取在线实时汇率
            this.getRateUnits()
            // 根据屏幕大小自动调整初始文本框宽度
            if (window.screen.width > 1920) {
                this.sizeAndWeightSpanNum = 3
                this.costProfitSpanNum = 6
            } else {
                this.sizeAndWeightSpanNum = 4
                this.costProfitSpanNum = 7
            }
        },
        methods: {
            // 售价计算
            priceCalculationHandle(value) {
                const priceCalculation = {...this.priceCalculation}
                const inputVal = this.removeBeginningZero(priceCalculation[value])
                const priceAttrList = ['price', 'priceCNY', 'commission', 'commissionCNY', 'deliverFee', 'deliverFeeCNY', 'adCost', 'adCostCNY', 'purchasingCost', 'purchasingCostCNY', 'grossProfitRate', 'grossProfit', 'grossProfitCNY']
                // 转数字
                for (let string of priceAttrList) {
                    priceCalculation[string] = Number(priceCalculation[string])
                }

                // 先把对应的数据变动
                switch (value) {
                    case 'purchasingCost':// 采购费
                        priceCalculation.purchasingCostCNY = priceCalculation.purchasingCost * priceCalculation.currencyRate
                        priceCalculation.grossProfit = priceCalculation.purchasingCost * priceCalculation.grossProfitRate / 100
                        priceCalculation.grossProfitCNY = priceCalculation.grossProfit * priceCalculation.currencyRate
                        break
                    case 'purchasingCostCNY':
                        priceCalculation.purchasingCost = priceCalculation.purchasingCostCNY / priceCalculation.currencyRate
                        priceCalculation.grossProfit = priceCalculation.purchasingCost * priceCalculation.grossProfitRate / 100
                        priceCalculation.grossProfitCNY = priceCalculation.grossProfit * priceCalculation.currencyRate
                        break
                    case 'deliverFee':// 配送费
                        priceCalculation.deliverFeeCNY = priceCalculation.deliverFee * priceCalculation.currencyRate
                        break
                    case 'deliverFeeCNY':
                        priceCalculation.deliverFee = priceCalculation.deliverFeeCNY / priceCalculation.currencyRate || 0
                        break
                    case 'grossProfitRate':// 毛利
                        priceCalculation.grossProfit = priceCalculation.purchasingCost * priceCalculation.grossProfitRate / 100
                        priceCalculation.grossProfitCNY = priceCalculation.grossProfit * priceCalculation.currencyRate
                        break
                    case 'grossProfit':
                        priceCalculation.grossProfitCNY = priceCalculation.grossProfit * priceCalculation.currencyRate
                        priceCalculation.grossProfitRate = priceCalculation.grossProfit / priceCalculation.purchasingCost * 100 || 0
                        break
                    case 'grossProfitCNY':
                        priceCalculation.grossProfit = priceCalculation.grossProfitCNY / priceCalculation.currencyRate
                        priceCalculation.grossProfitRate = priceCalculation.grossProfit / priceCalculation.purchasingCost * 100 || 0
                        break
                    case 'currency':
                        priceCalculation.currencyRate = this.convertRate(1, priceCalculation.currency, 'CNY')
                        // 配送费
                        priceCalculation.deliverFeeCNY = priceCalculation.deliverFee * priceCalculation.currencyRate
                        // 采购成本
                        priceCalculation.purchasingCostCNY = priceCalculation.purchasingCost * priceCalculation.currencyRate
                        // 毛利润
                        priceCalculation.grossProfitCNY = priceCalculation.grossProfit * priceCalculation.currencyRate
                        break
                }
                // 计算售价
                priceCalculation.price = (priceCalculation.grossProfit + priceCalculation.deliverFee + priceCalculation.purchasingCost) / ((100 - priceCalculation.commissionRate - priceCalculation.adRate) / 100)

                // 广告费计算
                switch (value) {
                    case 'adRate':
                        priceCalculation.adCost = priceCalculation.price * priceCalculation.adRate / 100
                        priceCalculation.adCostCNY = priceCalculation.adCost * priceCalculation.currencyRate
                        break
                    case 'adCost':
                        priceCalculation.adCostCNY = priceCalculation.adCost * priceCalculation.currencyRate
                        priceCalculation.price = (priceCalculation.grossProfit + priceCalculation.deliverFee + priceCalculation.purchasingCost + priceCalculation.adCost) / ((100 - priceCalculation.commissionRate) / 100)
                        priceCalculation.adRate = priceCalculation.adCost / priceCalculation.price * 100 || 0
                        break
                    case 'adCostCNY':
                        priceCalculation.adCost = priceCalculation.adCostCNY / priceCalculation.currencyRate
                        priceCalculation.price = (priceCalculation.grossProfit + priceCalculation.deliverFee + priceCalculation.purchasingCost + priceCalculation.adCost) / ((100 - priceCalculation.commissionRate) / 100)
                        priceCalculation.adRate = priceCalculation.adCost / priceCalculation.price * 100 || 0
                        break
                }
                // 广告费计算
                if (!['adCost', 'adCostCNY'].includes(value)) {
                    priceCalculation.adCost = priceCalculation.price * priceCalculation.adRate / 100
                    priceCalculation.adCostCNY = priceCalculation.adCost * priceCalculation.currencyRate
                }

                priceCalculation.priceCNY = priceCalculation.price * priceCalculation.currencyRate
                // 计算佣金值
                priceCalculation.commission = priceCalculation.price * priceCalculation.commissionRate / 100
                priceCalculation.commissionCNY = priceCalculation.commission * priceCalculation.currencyRate

                // 保留4位小数
                this.toFixedObjAttr(priceCalculation, 4, priceAttrList)
                // 把正在输入的值放回去
                if (priceAttrList.includes(value)) {
                    priceCalculation[value] = inputVal
                }

                this.priceCalculation = {...priceCalculation}
            },
            // 利润计算
            profitCalculationHandle(value) {
                const profitCalculation = {...this.profitCalculation}
                // 转数字
                const priceAttrList = ['price', 'priceCNY', 'commission', 'commissionCNY', 'deliverFee', 'deliverFeeCNY', 'adCost', 'adCostCNY', 'purchasingCost', 'purchasingCostCNY', 'grossProfit', 'grossProfitCNY']
                for (let string of priceAttrList) {
                    profitCalculation[string] = this.removeBeginningZero(profitCalculation[string])
                    if (string === value) {
                        this.removeArrElement(string, priceAttrList)
                    }
                }
                // 先把对应的数据变动
                switch (value) {
                    case 'price':
                        profitCalculation.priceCNY = profitCalculation.price * profitCalculation.currencyRate
                        // 佣金
                        profitCalculation.commission = profitCalculation.price * profitCalculation.commissionRate / 100
                        profitCalculation.commissionCNY = profitCalculation.commission * profitCalculation.currencyRate
                        // 广告
                        profitCalculation.adCost = profitCalculation.price * profitCalculation.adRate / 100
                        profitCalculation.adCostCNY = profitCalculation.adCost * profitCalculation.currencyRate
                        break
                    case 'priceCNY':
                        profitCalculation.price = profitCalculation.priceCNY / profitCalculation.currencyRate
                        // 佣金
                        profitCalculation.commission = profitCalculation.price * profitCalculation.commissionRate / 100
                        profitCalculation.commissionCNY = profitCalculation.commission * profitCalculation.currencyRate
                        // 广告
                        profitCalculation.adCost = profitCalculation.price * profitCalculation.adRate / 100
                        profitCalculation.adCostCNY = profitCalculation.adCost * profitCalculation.currencyRate
                        break
                    case 'commissionRate':
                        // 佣金
                        profitCalculation.commission = profitCalculation.price * profitCalculation.commissionRate / 100
                        profitCalculation.commissionCNY = profitCalculation.commission * profitCalculation.currencyRate
                        break
                    case 'deliverFee':
                        profitCalculation.deliverFeeCNY = profitCalculation.deliverFee * profitCalculation.currencyRate
                        break
                    case 'deliverFeeCNY':
                        profitCalculation.deliverFee = profitCalculation.deliverFeeCNY / profitCalculation.currencyRate
                        break
                    case 'adRate':
                        profitCalculation.adCost = profitCalculation.price * profitCalculation.adRate / 100
                        profitCalculation.adCostCNY = profitCalculation.adCost * profitCalculation.currencyRate
                        break
                    case 'adCost':
                        profitCalculation.adCostCNY = profitCalculation.adCost * profitCalculation.currencyRate
                        profitCalculation.adRate = profitCalculation.price ? profitCalculation.adCost / profitCalculation.price * 100 : 0
                        break
                    case 'adCostCNY':
                        profitCalculation.adCost = profitCalculation.adCostCNY / profitCalculation.currencyRate
                        profitCalculation.adRate = profitCalculation.price ? profitCalculation.adCost / profitCalculation.price * 100 : 0
                        break
                    case 'purchasingCost':
                        profitCalculation.purchasingCostCNY = profitCalculation.purchasingCost * profitCalculation.currencyRate
                        break
                    case 'purchasingCostCNY':
                        profitCalculation.purchasingCost = profitCalculation.purchasingCostCNY / profitCalculation.currencyRate
                        break
                    case 'currency':
                        profitCalculation.currencyRate = this.convertRate(1, profitCalculation.currency, 'CNY')
                        // 价格
                        profitCalculation.priceCNY = profitCalculation.price * profitCalculation.currencyRate
                        // 佣金
                        profitCalculation.commission = profitCalculation.price * profitCalculation.commissionRate / 100
                        profitCalculation.commissionCNY = profitCalculation.commission * profitCalculation.currencyRate
                        // 广告
                        profitCalculation.adCost = profitCalculation.price * profitCalculation.adRate / 100
                        profitCalculation.adCostCNY = profitCalculation.adCost * profitCalculation.currencyRate
                        // 配送费
                        profitCalculation.deliverFeeCNY = profitCalculation.deliverFee * profitCalculation.currencyRate
                        // 采购成本
                        profitCalculation.purchasingCostCNY = profitCalculation.purchasingCost * profitCalculation.currencyRate
                        break
                }
                // 计算毛利润
                profitCalculation.grossProfit = profitCalculation.price - profitCalculation.commission - profitCalculation.deliverFee - profitCalculation.adCost - profitCalculation.purchasingCost
                profitCalculation.grossProfitCNY = profitCalculation.grossProfit * profitCalculation.currencyRate
                // 保留4位小数
                this.toFixedObjAttr(profitCalculation, 4, priceAttrList)
                this.profitCalculation = {...profitCalculation}
            },
            // 先根据重量再看尺寸进行配送费计算
            classificationHandler() {
                // 取出四个尺寸中符合重量要求的重量区间
                const weightRangeMap = {}
                if (this.weight.lb > 0) {
                    for (let sizeTypeKey in this.sizeType) {
                        const sizeTypeVal = this.sizeType[sizeTypeKey]
                        weightRangeMap[sizeTypeKey] = this.getWeightCondition(sizeTypeVal.weight)
                    }
                }
                // 获取匹配的标准尺寸
                let sizeTypeNameBySize = ''
                if (this.size.length['in'] && this.size.width['in'] && this.size.height['in']) {
                    const arr = [this.size.length['in'], this.size.width['in'], this.size.height['in']]
                    for (let sizeTypeKey in this.sizeType) {
                        const sizeTypeVal = this.sizeType[sizeTypeKey]
                        if (this.matchConditions(sizeTypeVal.side, arr)) {
                            sizeTypeNameBySize = sizeTypeKey
                            break
                        }
                    }
                }
                // 尺寸和重量都在一个标准时为同一个标准
                if (sizeTypeNameBySize && Object.keys(weightRangeMap).length) {
                    console.log('尺寸和重量都在一个标准时为同一个标准')
                    let deliveryFee = null
                    let highDeliveryFee = null
                    if (weightRangeMap[sizeTypeNameBySize] !== null) {
                        // 标准FBA费用
                        const weightRange = weightRangeMap[sizeTypeNameBySize]
                        deliveryFee = this.getDeliveryFee(weightRange)
                        this.classification = this.sizeType[sizeTypeNameBySize].name
                        // 高一阶
                        const nextRange = weightRange['next']
                        if (nextRange) {
                            console.log('有高一阶直接使用')
                            // 有高一阶时直接使用
                            this.highClassification = this.sizeType[sizeTypeNameBySize].name
                            highDeliveryFee = this.getDeliveryFee(nextRange)
                        } else {
                            console.log('没有高一阶时，查找重量在更大尺寸的匹配区间')
                            // 没有高一阶时，查找重量在更大尺寸的匹配区间
                            const keys = Object.keys(weightRangeMap)
                            for (let i = keys.indexOf(sizeTypeNameBySize) + 1; i < keys.length; i++) {
                                // 取下一尺寸取适配重量，获取next
                                let range = weightRangeMap[keys[i]]
                                if (i === 1) {
                                    range = range['next']
                                }
                                if (range !== null) {
                                    // 有高一阶时直接输入
                                    highDeliveryFee = this.getDeliveryFee(range)
                                    this.highClassification = this.sizeType[keys[i]].name
                                    break
                                }
                            }
                        }
                    } else {
                        console.log('尺寸和重量不在一个标准，查找重量在更大尺寸的匹配区间')
                        // 尺寸和重量不在一个标准时，查找重量在更大尺寸的匹配区间
                        const keys = Object.keys(weightRangeMap)
                        for (let i = keys.indexOf(sizeTypeNameBySize) + 1; i < keys.length; i++) {
                            const weightRange = weightRangeMap[keys[i]]
                            if (weightRange !== null) {
                                deliveryFee = this.getDeliveryFee(weightRange)
                                this.classification = this.sizeType[keys[i]].name
                                // 高一阶
                                const nextRange = weightRange['next']
                                if (nextRange) {
                                    // 有高一阶时直接使用
                                    console.log('有高一阶时直接使用')
                                    highDeliveryFee = this.getDeliveryFee(nextRange)
                                    this.highClassification = this.sizeType[keys[i]].name
                                } else {
                                    console.log('没有高一阶时，查找重量在更大尺寸的匹配区间')
                                    // 没有高一阶时，查找重量在更大尺寸的匹配区间
                                    const keys = Object.keys(weightRangeMap)
                                    for (let j = i + 1; i < keys.length; i++) {
                                        // 取下一尺寸取适配重量，获取next
                                        let range = weightRangeMap[keys[j]]
                                        if (j === 1) {
                                            range = range['next']
                                        }
                                        if (range !== null) {
                                            // 有高一阶时直接输入
                                            highDeliveryFee = this.getDeliveryFee(range)
                                            console.log('取下一尺寸取适配重量，获取next:'+highDeliveryFee.fee)
                                            this.highClassification = this.sizeType[keys[j]].name
                                            break
                                        }
                                    }
                                }
                                break
                            }
                        }
                    }
                    if (deliveryFee) {
                        this.FBADeliveryFee.standard = deliveryFee.fee
                        this.FBADeliveryFee.lowPrice = deliveryFee.lowFee
                    }
                    if (highDeliveryFee) {
                        this.FBADeliveryFee.highStandard = highDeliveryFee.fee
                        this.FBADeliveryFee.highLowPrice = highDeliveryFee.lowFee
                    }
                } else if (sizeTypeNameBySize) {// 只有尺寸时
                    this.classification = this.sizeType[sizeTypeNameBySize].name
                } else if (Object.keys(weightRangeMap).length) {// 只有重量时，直接取符合条件的第一个区间
                    let deliveryFee = null
                    let highDeliveryFee = null
                    // 尺寸和重量不在一个标准时，查找重量在更大尺寸的匹配区间
                    console.log('尺寸和重量不在一个标准，查找重量在更大尺寸的匹配区间')
                    const keys = Object.keys(weightRangeMap)
                    for (let i = 0; i < keys.length; i++) {
                        const weightRange = weightRangeMap[keys[i]]
                        if (weightRange !== null) {
                            deliveryFee = this.getDeliveryFee(weightRange)
                            this.classification = this.sizeType[keys[i]].name
                            // 高一阶
                            const nextRange = weightRange['next']
                            if (nextRange) {
                                // 有高一阶时直接使用
                                console.log('有高一阶时直接使用')
                                highDeliveryFee = this.getDeliveryFee(nextRange)
                                this.highClassification = this.sizeType[keys[i]].name
                            } else {
                                // 没有高一阶时，查找重量在更大尺寸的匹配区间
                                console.log('没有高一阶时，查找重量在更大尺寸的匹配区间')
                                const keys = Object.keys(weightRangeMap)
                                for (let j = i + 1; i < keys.length; i++) {
                                    // 取下一尺寸取适配重量，获取next
                                    let range = weightRangeMap[keys[j]]
                                    if (j === 1) {
                                        range = range['next']
                                    }
                                    if (range !== null) {
                                        // 有高一阶时直接输入
                                        highDeliveryFee = this.getDeliveryFee(range)
                                        this.highClassification = this.sizeType[keys[j]].name
                                        break
                                    }
                                }
                            }
                            break
                        }
                    }
                    if (deliveryFee) {
                        this.FBADeliveryFee.standard = deliveryFee.fee
                        this.FBADeliveryFee.lowPrice = deliveryFee.lowFee
                    }
                    if (highDeliveryFee) {
                        this.FBADeliveryFee.highStandard = highDeliveryFee.fee
                        this.FBADeliveryFee.highLowPrice = highDeliveryFee.lowFee
                    }
                }
            },
            // 获取指定尺寸内符合实际重量的重量区间
            getWeightCondition(weight) {
                const keys = Object.keys(weight)
                for (let i = 0; i < keys.length; i++) {
                    const weightCondition = weight[keys[i]]
                    // 统一重量单位后的重量
                    const weightValue = this.weight[weightCondition.unit]
                    // 判断是否在重量区间内
                    if (weightValue > weightCondition.start && weightValue <= weightCondition.end) {
                        if (keys.length > i + 1) {
                            weightCondition['next'] = weight[keys[i+1]]
                        }
                        return weightCondition
                    }
                }
                return null
            },
            // 根据重量计算FBA配送费
            getDeliveryFee(weightCondition) {
                let fee = 0
                let lowFee = 0
                // 统一重量单位
                const weightValue = this.weight[weightCondition.unit]
                // 计算基本费用及超重费用
                fee = weightCondition.standardDeliveryFee
                lowFee = weightCondition.lowPriceDeliveryFee
                if (weightCondition.hasOwnProperty('excessWeight')) {
                    // 计算超重部分
                    let excessWeightValue = weightValue - (weightCondition.start === 0 ? 1 : weightCondition.start)
                    if (excessWeightValue < 0) excessWeightValue = 0
                    // 判断并统一重量单位
                    if (weightCondition.unit !== weightCondition.excessWeight.unit) {
                        excessWeightValue = this.convert(excessWeightValue, weightCondition.unit, weightCondition.excessWeight.unit, this.weightUnits)
                    }
                    const excessWeightFee = Math.ceil(excessWeightValue / weightCondition.excessWeight.segmentation) * weightCondition.excessWeight.surcharge
                    console.log('基本重量费用：'+fee)
                    console.log('超重重量费用：'+Math.ceil(excessWeightValue / weightCondition.excessWeight.segmentation)+'*'+weightCondition.excessWeight.surcharge+'='+excessWeightFee)
                    fee = parseFloat(fee + excessWeightFee).toFixed(2)
                    lowFee = parseFloat(lowFee + excessWeightFee).toFixed(2)
                }
                return { fee, lowFee }
            },
            // 尺寸是否符合条件
            matchConditions(side, arr) {
                arr.sort((a, b) => a - b);
                return side.shortestSide >= arr[0] && side.secondSide >= arr[1] && side.longestSide >= arr[2]
            },
            // 保留指定小数位数
            handleDataToFixed() {
                this.toFixedObjAttr(this.size.length, this.toFixedNum)
                this.toFixedObjAttr(this.size.width, this.toFixedNum)
                this.toFixedObjAttr(this.size.height, this.toFixedNum)
                this.toFixedObjAttr(this.volume, this.toFixedNum)
                this.toFixedObjAttr(this.weight, this.toFixedNum)
                this.toFixedObjAttr(this.rates, this.toFixedNum)
            },
            // 保留对象指定属性指定位数小数 超长才截取 不够的0不补
            toFixedObjAttr(obj, fixed, keys = []) {
                for (let key in obj) {
                    const value = Number(obj[key])
                    if (keys.length !== 0) {
                        // 当有指定属性列表时，在属性列表内的属性才进行精确小数位
                        if (keys.includes(key)) {
                            obj[key] = value ? Number(value.toFixed(fixed)) : 0
                        }
                    } else {
                        obj[key] = value ? Number(value.toFixed(fixed)) : 0
                    }
                }
            },
            // 关闭时还原保留小数位数
            handleFixedData(value) {
                if (!value) {
                    this.toFixedNum = -1
                }
            },
            // 长度置换
            handleSizeInput(value, unit, sizeObj) {
                sizeObj.mm = Number(this.convertSize(value, unit, 'mm'))
                sizeObj.cm = this.convertSize(value, unit, 'cm')
                sizeObj.in = this.convertSize(value, unit, 'in')
                sizeObj.ft = this.convertSize(value, unit, 'ft')
                if (this.size.length[unit] && this.size.width[unit] && this.size.height[unit]) {
                    this.handleVolumeInput(this.size.length[unit] * this.size.width[unit] * this.size.height[unit], unit)
                    // 计算FBA配送费
                    this.classificationHandler()
                }
            },
            // 体积置换
            handleVolumeInput(value, unit) {
                this.volume.cm = this.convertVolume(value, unit, 'cm')
                this.volume.m = this.convertVolume(value, unit, 'm')
                this.volume.in = this.convertVolume(value, unit, 'in')
                this.volume.ft = this.convertVolume(value, unit, 'ft')
            },
            // 重量置换
            handleWeightInput(value, unit) {
                this.weight.g = this.convertMass(value, unit, 'g')
                this.weight.kg = this.convertMass(value, unit, 'kg')
                this.weight.lb = this.convertMass(value, unit, 'lb')
                this.weight.oz = this.convertMass(value, unit, 'oz')
                // 计算FBA配送费
                this.classificationHandler()
            },
            // 汇率置换
            handleRatesInput(value, unit) {
                for (const str of this.currencys) {
                    this.rates[str] = this.convertRate(value, unit, str)
                }
            },
            // 转换尺寸、体积、重量、汇率数据
            convert(value, fromUnit, toUnit, units) {
                if (fromUnit === toUnit) return this.removeBeginningZero(value) // 正在输入的内容去除整数首位的0
                // Convert from original unit to specified unit
                const original = value * units[fromUnit];
                // Convert to target unit from specified unit
                return this.toFixedNum === -1 ? original / units[toUnit] : Number((original / units[toUnit]).toFixed(this.toFixedNum))
            },
            // 转换质量
            convertMass(value, fromUnit, toUnit) {
                return this.convert(value, fromUnit, toUnit, this.weightUnits)
            },
            // 转换尺寸
            convertSize(value, fromUnit, toUnit) {
                return this.convert(value, fromUnit, toUnit, this.sizeUnits)
            },
            // 转换体积
            convertVolume(value, fromUnit, toUnit) {
                return this.convert(value, fromUnit, toUnit, this.volumeUnits)
            },
            // 转换汇率
            convertRate(value, fromUnit, toUnit) {
                return this.convert(value, fromUnit, toUnit, this.rateUnits)
            },
            // 获取汇率
            getRateUnits() {
                const rateUnits = this.getCookie('rateUnits')
                if (rateUnits) {
                    console.log('获取到缓存rateUnits')
                    this.rateUnits = JSON.parse(rateUnits)
                    return
                }
                if (Object.keys(this.rateUnits).length !== 0) return
                const self = this
                fetch("https://api.exchangerate-api.com/v4/latest/CNY", {method: 'GET'})
                    .then(response => response.json())
                    .then(data => {
                        const rates = data.rates
                        for (let rateKey in rates) {
                            if (self.currencys.includes(rateKey)) {
                                self.rateUnits[rateKey] = 1 / rates[rateKey]
                            }
                        }
                        self.setCookie('rateUnits', JSON.stringify(self.rateUnits), 1)
                    })
                    .catch(error => console.error('Error:', error));
            },
            // 设置cookie
            setCookie(name, value, hourToLive) {
                let cookie = name + "=" + encodeURIComponent(value)
                if (typeof hourToLive === "number") {
                    cookie += "; max-age=" + (hourToLive*60*60) // max-age单位是秒
                }
                document.cookie = cookie
            },
            // 获取cookie
            getCookie(name) {
                let cookies = document.cookie.split(';')
                for (let i = 0; i < cookies.length; i++) {
                    let cookie = cookies[i].trim()
                    // 查找名称为name的cookie
                    if (cookie.indexOf(name + "=") === 0) {
                        return decodeURIComponent(cookie.substring(name.length + 1, cookie.length));
                    }
                }
                return null // 未找到cookie
            },
            // 删除数组指定元素
            removeArrElement(target = '', array = []) {
                const index = array.indexOf(target)
                if (index !== -1) {
                    array.splice(index, 1)
                }
            },
            // 去掉整数开头多余的0 防止输入时输入小数点后的0时，0被删除
            removeBeginningZero(num = '0') {
                num = String(num)
                const index = num.indexOf('.')
                return index === -1 ? Number(num) : Number(num.substring(0, index)) + '.' + num.substring(index + 1, num.length)
            }
        }
    });
</script>
</body>
</html>
